<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>JARVIS AI HUD</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root { --cyan: #00ffff; }
        * { box-sizing: border-box; }
        body { margin: 0; height: 100vh; font-family: 'Segoe UI', Arial, sans-serif; color: #fff; background: #000; overflow: hidden; }
        body::before { content: ""; position: fixed; inset: 0; background: linear-gradient(rgba(0,255,255,.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,255,255,.05) 1px, transparent 1px); background-size: 40px 40px; pointer-events: none; }
        
        .scan { position: fixed; top: -30%; width: 100%; height: 30%; background: linear-gradient(to bottom, transparent, rgba(0,255,255,.15), transparent); animation: scan 7s linear infinite; }
        @keyframes scan { 0% { top: -30% } 100% { top: 120% } }

        .wrapper { display: flex; height: 100vh; }
        .jarvis { 
            flex: 1; 
            background: url("./jarvis-bg.png") center/contain no-repeat; 
            filter: drop-shadow(0 0 30px rgba(0, 255, 255, 0.5)); 
        }

        .panel-wrap { flex: 1; display: flex; justify-content: center; align-items: center; z-index: 10; }
        .panel { width: 90%; max-width: 520px; background: rgba(0,0,0,.6); backdrop-filter: blur(12px); border: 1px solid rgba(0,255,255,.6); border-radius: 20px; box-shadow: 0 0 40px rgba(0,255,255,.4), inset 0 0 25px rgba(0,255,255,.2); padding: 22px; position: relative; }
        
        .panel::before, .panel::after { content: ""; position: absolute; width: 30px; height: 30px; border: 2px solid var(--cyan); }
        .panel::before { top: -2px; left: -2px; border-right: none; border-bottom: none; }
        .panel::after { bottom: -2px; right: -2px; border-left: none; border-top: none; }

        .header { text-align: center; font-size: 28px; letter-spacing: 6px; color: var(--cyan); text-shadow: 0 0 15px var(--cyan); font-weight: bold; }
        .sub { text-align: center; opacity: .7; margin-bottom: 15px; font-size: 12px; letter-spacing: 2px; }

        textarea { width: 100%; height: 110px; background: rgba(0,0,0,.6); border: 1px solid var(--cyan); color: var(--cyan); padding: 12px; border-radius: 10px; resize: none; outline: none; }
        textarea:focus { box-shadow: 0 0 10px var(--cyan); }

        button { width: 100%; margin-top: 10px; padding: 12px; background: rgba(0,255,255,0.1); border: 2px solid var(--cyan); color: var(--cyan); border-radius: 10px; font-weight: bold; cursor: pointer; transition: 0.3s; text-transform: uppercase; letter-spacing: 2px; }
        button:hover { background: rgba(0,255,255,0.3); box-shadow: 0 0 20px var(--cyan); }
        button:disabled { opacity: 0.5; cursor: not-allowed; }

        pre { margin-top: 12px; background: rgba(0,0,0,.8); border: 1px solid rgba(0,255,255,.3); padding: 12px; border-radius: 12px; height: 200px; overflow: auto; color: #0f0; font-size: 13px; white-space: pre-wrap; word-wrap: break-word; font-family: 'Consolas', monospace; }

        .footer { text-align: center; margin-top: 10px; font-size: 10px; opacity: .5; letter-spacing: 1px; }

        @media(max-width:768px) { .wrapper { flex-direction: column; } .jarvis { height: 40vh; } }
    </style>
</head>
<body>
    <div class="scan"></div>
    <div class="wrapper">
        <div class="jarvis"></div>
        <div class="panel-wrap">
            <div class="panel">
                <div class="header">J.A.R.V.I.S</div>
                <div class="sub">STARK NEURAL NETWORK</div>
                <textarea id="prompt" placeholder="Sebutkan perintah Anda, Bos Anggit..."></textarea>
                <button id="btn" onclick="run()">Execute Command</button>
                <pre id="output">// System Ready. Awaiting input...</pre>
                <div class="footer">STARK INDUSTRIES â€¢ PROPERTY OF ANGGIT</div>
            </div>
        </div>
    </div>

    <script>
        async function run() {
            const promptInput = document.getElementById("prompt");
            const out = document.getElementById("output");
            const btn = document.getElementById("btn");
            
            if(!promptInput.value.trim()) return alert("Perintah kosong, Bos!");

            const originalText = promptInput.value;
            out.textContent = "// Connecting to Stark Neural Network...\n// Bypassing firewalls...\n// Analyzing request...";
            btn.disabled = true;

            try {
                const resp = await fetch('/api/generate', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ prompt: originalText })
                });

                const data = await resp.json();

                if (data.result) {
                    out.textContent = data.result;
                } else if (data.error) {
                    out.textContent = "// ACCESS DENIED: " + data.error;
                } else {
                    out.textContent = "// Error: Neural Link Timeout.";
                }
            } catch (e) {
                out.textContent = "// Critical Error: Jarvis is offline. Check Vercel logs.";
                console.error(e);
            } finally {
                btn.disabled = false;
            }
        }
    </script>
</body>
</html>
