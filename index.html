<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>JARVIS AI HUD</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{--cyan:#00ffff}
*{box-sizing:border-box}
body{ margin:0; height:100vh; font-family:'Segoe UI',Arial,sans-serif; color:#fff; background:#000; overflow:hidden;}
body::before{ content:""; position:fixed; inset:0; background: linear-gradient(rgba(0,255,255,.05) 1px, transparent 1px), linear-gradient(90deg, rgba(0,255,255,.05) 1px, transparent 1px); background-size:40px 40px; pointer-events:none;}
.scan{ position:fixed; top:-30%; width:100%; height:30%; background:linear-gradient(to bottom, transparent, rgba(0,255,255,.15), transparent); animation:scan 7s linear infinite;}
@keyframes scan{ 0%{top:-30%} 100%{top:120%}}
.wrapper{ display:flex; height:100vh;}
/* Tambahkan titik (.) di depan jarvis */
.jarvis { 
  flex: 1; 
  background: url("./jarvis-bg.png") center/contain no-repeat; 
  filter: drop-shadow(0 0 30px rgba(0, 255, 255, 0.5)); 
}
.panel-wrap{ flex:1; display:flex; justify-content:center; align-items:center;}
.panel{ width:90%; max-width:520px; background:rgba(0,0,0,.4); backdrop-filter:blur(12px); border:1px solid rgba(0,255,255,.6); border-radius:20px; box-shadow: 0 0 40px rgba(0,255,255,.4), inset 0 0 25px rgba(0,255,255,.2); padding:22px; position:relative;}
.panel::before, .panel::after{ content:""; position:absolute; width:30px; height:30px; border:2px solid var(--cyan);}
.panel::before{top:-2px;left:-2px;border-right:none;border-bottom:none}
.panel::after{bottom:-2px;right:-2px;border-left:none;border-top:none}
.header{ text-align:center; font-size:28px; letter-spacing:6px; color:var(--cyan); text-shadow:0 0 15px var(--cyan);}
.sub{ text-align:center; opacity:.7; margin-bottom:15px;}
textarea{ width:100%; height:110px; background:rgba(0,0,0,.6); border:1px solid var(--cyan); color:var(--cyan); padding:12px; border-radius:10px; resize:none;}
button{ width:100%; margin-top:10px; padding:12px; background:transparent; border:2px solid var(--cyan); color:var(--cyan); border-radius:10px; font-weight:bold; cursor:pointer; box-shadow:0 0 15px rgba(0,255,255,.6);}
button:hover{background:rgba(0,255,255,.2)}
pre{ margin-top:12px; background:rgba(0,0,0,.7); border:1px solid rgba(0,255,255,.5); padding:12px; border-radius:12px; height:200px; overflow:auto; color:#0f0; font-size:13px; white-space: pre-wrap; word-wrap: break-word;}
.footer{ text-align:center; margin-top:8px; font-size:12px; opacity:.5;}
@media(max-width:768px){ .wrapper{flex-direction:column} .jarvis{height:40vh}}
</style>
</head>
<body>
<div class="scan"></div>
<div class="wrapper">
  <div class="jarvis"></div>
  <div class="panel-wrap">
    <div class="panel">
      <div class="header">J.A.R.V.I.S</div>
      <div class="sub">AI CODE GENERATOR</div>
      <textarea id="prompt" placeholder="Sebutkan perintah Anda, Bos Anggit..."></textarea>
      <button id="btn" onclick="run()">EXECUTE</button>
      <pre id="output">// Awaiting command, Sir...</pre>
      <div class="footer">Stark Industries â€¢ Anggit</div>
    </div>
  </div>
</div>
<script>
async function run() {
  const p = document.getElementById("prompt").value;
  const out = document.getElementById("output");
  const btn = document.getElementById("btn");
  if(!p) return alert("Perintah kosong, Bos!");

  out.textContent = "// Connecting to Stark Neural Network...\n// Analyzing request...";
  btn.disabled = true;

  try {
    const resp = await fetch('/api/generate', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({ prompt: p })
    });
    
    const data = await resp.json();

    // PERBAIKAN DI SINI: Sesuaikan 'result' dengan apa yang dikirim oleh API
    if (data.result) {
      out.textContent = data.result;
    } else if (data.error) {
      out.textContent = "// Error: " + data.error;
    } else {
      out.textContent = "// Neural Link Error.";
    }

  } catch (e) {
    out.textContent = "// Error: Jarvis is offline. Check API connection.";
  } finally {
    btn.disabled = false;
  }
}
</script>
</body>
</html>
